物品"复活"软件设计文档

# 1. 系统概述

## 1.1 项目背景

针对大学生群体开发的闲置物品交易平台，解决学生宿舍空间有限、物品处置困难的问题，支持物品赠送和售卖功能。

## 1.2 设计目标

- 提供简单易用的物品信息管理功能
- 支持物品分类管理（食品、书籍、工具等）
- 不同类别物品支持特定属性
- 保证基础数据安全性
- 支持命令行交互操作
- 具备良好的可扩展性

## 1.3 设计原则

- 功能优先：开发初期以实现核心功能为主
- 适度封装：在保证功能完整性的前提下进行基础封装
- 用户体验：提供清晰的交互指引和错误处理
- 安全平衡：在安全性和开发效率间取得平衡
- 面向对象：使用继承和多态实现物品分类系统

# 2. 类设计规范

## 2.1 Contacts类（联系人信息）

职责：管理用户联系信息

属性封装：
- 姓名（私有字符串）
- 电话（私有字符串）
- 邮箱（私有字符串）

方法设计：
- 构造方法：初始化所有联系信息（姓名、电话、邮箱）
- 信息获取方法：提供安全的属性访问（getName, getNum, getEmail）
- 显示方法：格式化输出联系人信息
- 信息修改方法：支持更新联系信息

## 2.2 Item类（物品基类）

职责：管理物品公共信息

属性封装：
- 物品名称（保护字符串）
- 物品说明（保护字符串）
- 物品所在地址（保护字符串）
- 联系人信息（保护Contacts对象）
- 物品类别（保护ItemCategory枚举）

方法设计：
- 构造方法：初始化物品完整信息
- 信息获取方法：提供安全的属性访问
- 显示方法：虚函数，支持多态显示
- 信息修改方法：支持更新物品信息

## 2.3 物品派生类

### 2.3.1 FoodItem类（食品类）

职责：管理食品类物品的特定属性

属性封装：
- 保质期（私有字符串）
- 数量（私有整数）

方法设计：
- 构造方法：初始化食品物品信息
- 属性访问方法：获取和设置保质期、数量
- 显示方法：重写基类方法，显示食品特有属性

### 2.3.2 BookItem类（书籍类）

职责：管理书籍类物品的特定属性

属性封装：
- 作者（私有字符串）
- 出版社（私有字符串）

方法设计：
- 构造方法：初始化书籍物品信息
- 属性访问方法：获取和设置作者、出版社
- 显示方法：重写基类方法，显示书籍特有属性

### 2.3.3 ToolItem类（工具类）

职责：管理工具类物品的特定属性

属性封装：
- 工具状态（私有字符串，如：全新、良好、需维修等）

方法设计：
- 构造方法：初始化工具物品信息
- 属性访问方法：获取和设置工具状态
- 显示方法：重写基类方法，显示工具特有属性

### 2.3.4 OtherItem类（其他类别）

职责：管理其他类别物品

方法设计：
- 构造方法：初始化其他类别物品信息
- 使用基类的显示方法

## 2.4 Inventory类（物品列表）

职责：核心业务逻辑处理

属性封装：
- 物品列表（私有vector<Item*>，使用指针支持多态）

方法设计：
- 添加物品：验证后加入列表（支持多态）
- 删除物品：基于名称的安全删除，自动释放内存
- 查询物品：支持名称搜索
- 列表显示：遍历显示所有物品信息
- 析构函数：自动释放所有动态分配的内存

## 2.5 Interface类（命令行接口）

职责：用户交互处理

属性封装：
- 物品管理器实例（私有Inventory对象）
- 联系人列表（私有vector<Contacts>）

方法设计：
- 菜单显示：清晰的操作指引
- 交互方法：各功能的用户交互流程
- 类别选择：引导用户选择物品类别
- 异常处理：用户输入错误处理

* 输入循环在main中实现

# 3. 物品信息结构

## 3.1 公共信息

所有物品都包含以下公共信息：
- 物品名称
- 物品说明
- 物品所在地址
- 联系人姓名
- 联系人手机
- 联系人邮箱

## 3.2 类别特定属性

### 食品类（FoodItem）
- 保质期
- 数量

### 书籍类（BookItem）
- 作者
- 出版社

### 工具类（ToolItem）
- 工具状态（如：全新、良好、需维修等）

### 其他类别（OtherItem）
- 仅包含公共信息

# 4. 安全设计

## 4.1 封装策略

- 所有类属性设为私有或保护
- 通过公共方法提供受控访问
- 使用智能指针或手动内存管理确保资源安全

## 4.2 数据验证

- 输入参数基础验证
- 集合操作边界检查
- 空值处理机制
- 类别选择验证

## 4.3 异常处理

- 用户输入错误友好提示
- 系统异常基础捕获
- 操作失败明确反馈
- 内存管理安全（析构函数自动释放）

## 4.4 多态设计

- 使用虚函数实现多态
- 基类指针存储派生类对象
- 正确调用派生类的重写方法

# 5. 使用方法

## 5.1 编译环境

### Windows端

配置好cmake后，在文件根目录运行：

```terminal
make run
mingw32-make run    // 如果直接执行make报错
```

### Mac端

配置cmake：
```terminal
brew install cmake make
```

运行：
```terminal
make run
```

## 5.2 使用说明

1. **添加物品**：选择菜单项1，依次输入：
   - 物品名称
   - 物品说明
   - 物品所在地址
   - 联系人姓名
   - 联系人手机
   - 联系人邮箱
   - 选择物品类别（1-食品，2-书籍，3-工具，4-其他）
   - 根据类别输入特定属性（如食品需输入保质期和数量）

2. **删除物品**：选择菜单项2，输入要删除的物品名称

3. **查看所有物品**：选择菜单项3，显示所有物品的详细信息

4. **搜索物品**：选择菜单项4，输入物品名称进行搜索

5. **退出程序**：输入 'e' 退出程序

## 5.3 注意事项

- 所有输入字段不能为空
- 物品名称用于唯一标识物品
- 程序退出时会自动释放所有内存